# [백준] 상어 초등학교

Gold 5

https://www.acmicpc.net/problem/21608

<br>

## 성공. 56분

변수명이나 class를 어떻게 할지 중간중간 고민을 하느라 시간이 꽤 걸리긴 했지만 그래도 거의 실수없이 한번에 구현했다.

> 확실히 구현 문제는 풀이 시간을 줄이려면 많이 풀어봐야 할 것 같다.

<details><summary> 소스코드 </summary>

```java
import java.io.*;
import java.util.*;

class Seat {
    public int r, c;
    public int numOfAdjFriend, numOfAdjEmptySeat;

    public Seat(int r, int c, int numOfAdjFriend, int numOfAdjEmptySeat) {
        this.r = r;
        this.c = c;
        this.numOfAdjFriend = numOfAdjFriend;
        this.numOfAdjEmptySeat = numOfAdjEmptySeat;
    }
}

public class Main {

    final int[] dr = {-1, 0, 1, 0};
    final int[] dc = {0, 1, 0, -1};

    final int EMPTY_SEAT = -1;

    int N;
    int[][] seats;

    HashMap<Integer, int[]> friendsOfStudent = new HashMap<>();

    Seat calcAdjSeat(int r, int c, int[] friends) {
        int numOfAdjFriend = 0;
        int numOfAdjEmptySeat = 0;

        for (int dir = 0; dir < 4; dir++) {
            int adjR = r + dr[dir];
            int adjC = c + dc[dir];

            if (adjR < 0 || adjR >= N || adjC < 0 || adjC >= N) continue;

            int adjSeat = seats[adjR][adjC];
            if (adjSeat == EMPTY_SEAT) numOfAdjEmptySeat++;
            else {
                boolean isFriend = false;
                for (int friend : friends) {
                    if (friend != adjSeat) continue;

                    isFriend = true;
                    break;
                }
                if (isFriend) numOfAdjFriend++;
            }
        }

        return new Seat(r, c, numOfAdjFriend, numOfAdjEmptySeat);
    }

    public int calcSatisfaction(int r, int c) {
        int[] friends = friendsOfStudent.get(seats[r][c]);

        Seat curSeat = calcAdjSeat(r, c, friends);

        if (curSeat.numOfAdjFriend == 0) return 0;

        int ret = 1;
        for (int i = 1; i < curSeat.numOfAdjFriend; i++) {
            ret *= 10;
        }
        return ret;
    }

    public void solution() throws Exception {
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(System.out));

        N = Integer.parseInt(br.readLine());
        seats = new int[N][N];
        for (int[] rows : seats) Arrays.fill(rows, EMPTY_SEAT);

        for (int i = 0; i < N * N; i++) {
            StringTokenizer st = new StringTokenizer(br.readLine(), " ");
            int student = Integer.parseInt(st.nextToken());
            int[] friends = new int[4];
            for (int j = 0; j < friends.length; j++) {
                friends[j] = Integer.parseInt(st.nextToken());
            }
            friendsOfStudent.put(student, friends);

            PriorityQueue<Seat> pq = new PriorityQueue<>((a, b) -> {
                if (a.numOfAdjFriend == b.numOfAdjFriend) return b.numOfAdjEmptySeat - a.numOfAdjEmptySeat;
                else return b.numOfAdjFriend - a.numOfAdjFriend;
            });

            for (int r = 0; r < N; r++) {
                for (int c = 0; c < N; c++) {
                    if (seats[r][c] != -1) continue;

                    pq.add(calcAdjSeat(r, c, friends));
                }
            }
            Seat curSeat = pq.poll();
            seats[curSeat.r][curSeat.c] = student;
        }

        int sumOfSatisfaction = 0;

        for (int r = 0; r < N; r++) {
            for (int c = 0; c < N; c++) {
                sumOfSatisfaction += calcSatisfaction(r, c);
            }
        }

        bw.write(Integer.toString(sumOfSatisfaction) + '\n');

        br.close();
        bw.close();
    }

    public static void main(String[] args) throws Exception {
        new Main().solution();
    }
}

```

</details>